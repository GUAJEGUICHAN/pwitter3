(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{58:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n.n(r),u=n(40),i=n.n(u),o=n(11),a=n(41),s=n(45),j=n(42),l=n(46);a.a({apiKey:"AIzaSyDr9U6QU_LlSwmsNjvfY4xgolctgBY59uU",authDomain:"nwitter-42dcd.firebaseapp.com",projectId:"nwitter-42dcd",storageBucket:"nwitter-42dcd.appspot.com",messagingSenderId:"478711380670",appId:"1:478711380670:web:2b040e8f9e2dc59fe0bcef"});var d=s,b=j,f=l,O=n(28),p=n(13),h=n(31),g=n(9),x=function(e){var t=e.pweetObj,n=Object(r.useState)(!1),c=Object(o.a)(n,2),u=c[0],i=c[1],a=Object(r.useState)(t.text),s=Object(o.a)(a,2),j=s[0],l=s[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{children:u?Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),window.confirm("\uc815\ub9d0\ub85c \uc218\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&b.updateDoc(b.doc(b.getFirestore(),"pweet3/".concat(t.id)),{text:j}),i(!1)},children:[Object(g.jsx)("input",{type:"text",value:j,onChange:function(e){var t=e.target.value;l(t)},required:!0}),Object(g.jsx)("input",{type:"submit"})]}):Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:t.text}),t.imgURL&&Object(g.jsx)("img",{src:t.imgURL,height:"200px",alt:"img"})]})}),Object(g.jsx)("button",{onClick:function(){window.confirm("\uc9c4\uc9dc \uc0ad\uc81c?")&&(b.deleteDoc(b.doc(b.getFirestore(),"pweet3/".concat(t.id))),t.imgURL&&f.deleteObject(f.ref(f.getStorage(),t.imgURL)))},children:"Delete"}),Object(g.jsx)("button",{onClick:function(){i(!u)},value:j,children:"Edit"})]})},m=n(0),v=n.n(m),w=n(2),A=n(60),y=function(e){var t=e.userObj,n=Object(r.useState)(""),c=Object(o.a)(n,2),u=c[0],i=c[1],a=Object(r.useState)(""),s=Object(o.a)(a,2),j=s[0],l=s[1],O=Object(r.useRef)(""),p=function(){var e=Object(w.a)(v.a.mark((function e(n){var r,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=j,!j){e.next=10;break}return c=f.ref(f.getStorage(),"".concat(t.uid," / ").concat(Object(A.a)())),e.next=6,f.uploadString(c,r,"data_url");case 6:return o=e.sent,e.next=9,f.getDownloadURL(o.ref).then((function(e){r=e}));case 9:h(null);case 10:return e.next=12,b.addDoc(b.collection(b.getFirestore(),"pweet3"),{text:u,createdAt:Date.now(),uid:d.getAuth().currentUser.uid,imgURL:r});case 12:i("");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){if(null===e)return O.current.value="",void l("");var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){return l(e.target.result)}};return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:p,children:[Object(g.jsx)("input",{type:"text",placeholder:"",onChange:function(e){var t=e.target.value;i(t),console.log(u)},value:u,required:!0}),Object(g.jsx)("input",{type:"file",accept:"image/*",onChange:h}),Object(g.jsx)("input",{type:"submit"}),j&&Object(g.jsx)("img",{src:j,alt:"imgPreview",height:"200px",ref:O})]})})},S=function(e){var t=e.userObj,n=Object(r.useState)([]),c=Object(o.a)(n,2),u=c[0],i=c[1];return Object(r.useEffect)((function(){var e=!0;if(!0===e){var t=b.query(b.collection(b.getFirestore(),"pweet3"),b.orderBy("createdAt","desc"));b.onSnapshot(t,(function(e){i(e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())})))}))}return function(){e=!1}}),[]),Object(g.jsxs)("div",{children:["\ub098\ub294 Home component\uc57c \ud2b8\uc704\ud130 \uc785\ub825\ud558\uac8c \ud574\uc904\uaed8",Object(g.jsx)(y,{userObj:t}),u.map((function(e,t){return Object(g.jsx)(x,{pweetObj:e},t)}))]})},U=function(e){var t=e.userObj,n=e.refreshName,c=Object(r.useRef)(d.getAuth().currentUser.displayName),u=Object(r.useState)([]),i=Object(o.a)(u,2),a=i[0],s=i[1];Object(r.useEffect)((function(){var e=!0;if(e){var n=b.query(b.collection(b.getFirestore(),"pweet3"),b.where("uid","==",t.uid),b.orderBy("createdAt","desc"));b.onSnapshot(n,(function(e){return s(e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())})))}))}return function(){return e=!1}}),[t]);var j=function(){var e=Object(w.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,d.updateProfile(d.getAuth().currentUser,{displayName:c.current.value}).then((function(e){return console.log("updateProfile\uac00 then\uc5d0 \ubc49\ub294 \uac12",e)})).catch((function(e){return console.log(e)}));case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:["\ub098\ub294 Profile Component\uc57c",Object(g.jsxs)("form",{onSubmit:j,children:[Object(g.jsx)("input",{type:"text",required:!0,ref:c}),Object(g.jsx)("input",{type:"submit",value:"\uc774\ub984 \uc218\uc815"}),a&&a.map((function(e,t){return Object(g.jsx)(x,{pweetObj:e},t)})),console.log("myPweets",a)]})]})},C=function(e){e.userObj;return Object(g.jsxs)("div",{children:[Object(g.jsx)(O.b,{to:"/",children:"Home"}),Object(g.jsxs)(O.b,{to:"/profile",children:[d.getAuth().currentUser.displayName||"My","Profile"]})]})},D=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(r.useRef)(""),i=Object(r.useRef)(""),a=function(e){var t;"Google"===e.target.innerHTML?t=new d.GoogleAuthProvider:"Github"===e.target.innerHTML?t=new d.GithubAuthProvider:console.log("\uc5d0\ub7ec\ub2e4 \uc5d0\ub7ec"),d.signInWithPopup(d.getAuth(),t)};return Object(g.jsxs)("div",{children:["\ub098\ub294 Auth Component \uc9c0\uae08 \ub85c\uadf8\uc778 \uc548\ub418\uc5b4 \uc788\uc74c",Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n?d.signInWithEmailAndPassword(d.getAuth(),u.current.value,i.current.value).then((function(e){return console.log("\ub85c\uadf8\uc778 \uc131\uacf5",e)})).catch((function(e){return console.log("\uc5d0\ub7ec",e)})):d.createUserWithEmailAndPassword(d.getAuth(),u.current.value,i.current.value).then((function(e){return console.log("\uac00\uc785\uc131\uacf5",e)})).catch((function(e){return console.log("\uc5d0\ub7ec",e)}))},children:[Object(g.jsx)("input",{type:"text",placeholder:"\uc774\uba54\uc77c!",required:!0,ref:u}),Object(g.jsx)("input",{type:"password",placeholder:"\ube44\ubc88!",required:!0,ref:i}),Object(g.jsx)("input",{type:"submit",value:n?"Create Account":"Log In"}),Object(g.jsx)("div",{onClick:function(){return c(!n)},children:n?"Log In":"Create Account"})]}),Object(g.jsxs)("div",{children:["\uac04\ud3b8 \ub85c\uadf8\uc778",Object(g.jsx)("button",{onClick:a,children:"Google"}),Object(g.jsx)("button",{onClick:a,children:"Github"})]})]})},R=function(e){var t=e.userObj,n=e.loggedIn,r=e.refreshName;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(O.a,{children:[Object(g.jsx)(C,{userObj:t}),Object(g.jsxs)(p.c,{children:[Object(g.jsx)(p.a,{path:"/",exact:!0,children:n?Object(g.jsx)(S,{userObj:t,loggedIn:n}):Object(g.jsx)(D,{})}),Object(g.jsx)(p.a,{path:"/profile",exact:!0,children:Object(g.jsx)(U,{userObj:t,refreshName:r})})]})]}),Object(g.jsx)("div",{children:"AppRouter\ub2e4!"})]})};var I=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){d.onAuthStateChanged(d.getAuth(),(function(e){console.log("onAuthStateChanged",e),console.log(d.getAuth().currentUser.uid),c(e)}))})),Object(g.jsx)(g.Fragment,{children:n&&Object(g.jsx)(R,{userObj:n,loggedIn:null!==n,refreshName:function(){c(Object.assign({},d.getAuth()))}})})};i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(I,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.79ba81cb.chunk.js.map